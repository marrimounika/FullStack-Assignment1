{% extends "base.html" %}

{% block content %}
    <h2>Conversation with {{ other_user.username }}</h2>
    <div class="conversation-container">
        {% for msg in messages %}
            <div class="message {% if msg.sender_id == current_user.id %}sent{% else %}received{% endif %}">
                <p><strong>{{ msg.sender.username }}:</strong> {{ msg.content }}</p>
                <small class="text-muted">{{ msg.timestamp.strftime('%Y-%m-%d %H:%M') }}</small>
            </div>
        {% endfor %}
    </div>

    <form method="POST">
        {{ form.hidden_tag() }}
        <div class="form-group">
            {{ form.content(class="form-control", placeholder="Type your message here...") }}
            {% for error in form.content.errors %}
                <small class="text-danger">{{ error }}</small>
            {% endfor %}
        </div>
        <button type="submit" class="btn btn-primary">{{ form.submit.label.text }}</button>
    </form>
{% endblock %}

<style>
.conversation-container {
    border: 1px solid #ddd;
    padding: 15px;
    max-height: 500px;
    overflow-y: auto;
    background: #f9f9f9;
}
.message {
    margin-bottom: 10px;
    padding: 10px;
    border-radius: 10px;
    max-width: 60%;
}
.message.sent {
    background-color: #d1e7dd;
    align-self: flex-end;
    text-align: right;
}
.message.received {
    background-color: #f8d7da;
    align-self: flex-start;
}
</style>
